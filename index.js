(()=>{(function(){"use strict";var et={exports:{}};(function(t){var o=function(i){var c=Object.prototype,l=c.hasOwnProperty,p,w=typeof Symbol=="function"?Symbol:{},S=w.iterator||"@@iterator",m=w.asyncIterator||"@@asyncIterator",_=w.toStringTag||"@@toStringTag";function $(n,e,s){return Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{$({},"")}catch{$=function(e,s,a){return e[s]=a}}function L(n,e,s,a){var r=e&&e.prototype instanceof G?e:G,u=Object.create(r.prototype),h=new I(a||[]);return u._invoke=ie(n,s,h),u}i.wrap=L;function v(n,e,s){try{return{type:"normal",arg:n.call(e,s)}}catch(a){return{type:"throw",arg:a}}}var P="suspendedStart",T="suspendedYield",K="executing",R="completed",y={};function G(){}function O(){}function x(){}var N={};N[S]=function(){return this};var F=Object.getPrototypeOf,M=F&&F(F(H([])));M&&M!==c&&l.call(M,S)&&(N=M);var C=x.prototype=G.prototype=Object.create(N);O.prototype=C.constructor=x,x.constructor=O,O.displayName=$(x,_,"GeneratorFunction");function Q(n){["next","throw","return"].forEach(function(e){$(n,e,function(s){return this._invoke(e,s)})})}i.isGeneratorFunction=function(n){var e=typeof n=="function"&&n.constructor;return e?e===O||(e.displayName||e.name)==="GeneratorFunction":!1},i.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,x):(n.__proto__=x,$(n,_,"GeneratorFunction")),n.prototype=Object.create(C),n},i.awrap=function(n){return{__await:n}};function j(n,e){function s(u,h,d,g){var f=v(n[u],n,h);if(f.type==="throw")g(f.arg);else{var q=f.arg,E=q.value;return E&&typeof E=="object"&&l.call(E,"__await")?e.resolve(E.__await).then(function(b){s("next",b,d,g)},function(b){s("throw",b,d,g)}):e.resolve(E).then(function(b){q.value=b,d(q)},function(b){return s("throw",b,d,g)})}}var a;function r(u,h){function d(){return new e(function(g,f){s(u,h,g,f)})}return a=a?a.then(d,d):d()}this._invoke=r}Q(j.prototype),j.prototype[m]=function(){return this},i.AsyncIterator=j,i.async=function(n,e,s,a,r){r===void 0&&(r=Promise);var u=new j(L(n,e,s,a),r);return i.isGeneratorFunction(e)?u:u.next().then(function(h){return h.done?h.value:u.next()})};function ie(n,e,s){var a=P;return function(u,h){if(a===K)throw new Error("Generator is already running");if(a===R){if(u==="throw")throw h;return tt()}for(s.method=u,s.arg=h;;){var d=s.delegate;if(d){var g=Z(d,s);if(g){if(g===y)continue;return g}}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(a===P)throw a=R,s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);a=K;var f=v(n,e,s);if(f.type==="normal"){if(a=s.done?R:T,f.arg===y)continue;return{value:f.arg,done:s.done}}else f.type==="throw"&&(a=R,s.method="throw",s.arg=f.arg)}}}function Z(n,e){var s=n.iterator[e.method];if(s===p){if(e.delegate=null,e.method==="throw"){if(n.iterator.return&&(e.method="return",e.arg=p,Z(n,e),e.method==="throw"))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var a=v(s,n.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,y;var r=a.arg;if(!r)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y;if(r.done)e[n.resultName]=r.value,e.next=n.nextLoc,e.method!=="return"&&(e.method="next",e.arg=p);else return r;return e.delegate=null,y}Q(C),$(C,_,"Generator"),C[S]=function(){return this},C.toString=function(){return"[object Generator]"};function ne(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function A(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function I(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(ne,this),this.reset(!0)}i.keys=function(n){var e=[];for(var s in n)e.push(s);return e.reverse(),function a(){for(;e.length;){var r=e.pop();if(r in n)return a.value=r,a.done=!1,a}return a.done=!0,a}};function H(n){if(n){var e=n[S];if(e)return e.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length)){var s=-1,a=function r(){for(;++s<n.length;)if(l.call(n,s))return r.value=n[s],r.done=!1,r;return r.value=p,r.done=!0,r};return a.next=a}}return{next:tt}}i.values=H;function tt(){return{value:p,done:!0}}return I.prototype={constructor:I,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(A),!n)for(var e in this)e.charAt(0)==="t"&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var n=this.tryEntries[0],e=n.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function s(g,f){return u.type="throw",u.arg=n,e.next=g,f&&(e.method="next",e.arg=p),!!f}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],u=r.completion;if(r.tryLoc==="root")return s("end");if(r.tryLoc<=this.prev){var h=l.call(r,"catchLoc"),d=l.call(r,"finallyLoc");if(h&&d){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(h){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else if(d){if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(n,e){for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s];if(a.tryLoc<=this.prev&&l.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&(n==="break"||n==="continue")&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var u=r?r.completion:{};return u.type=n,u.arg=e,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(u)},complete:function(n,e){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&e&&(this.next=e),y},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var s=this.tryEntries[e];if(s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),A(s),y}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var s=this.tryEntries[e];if(s.tryLoc===n){var a=s.completion;if(a.type==="throw"){var r=a.arg;A(s)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,s){return this.delegate={iterator:H(n),resultName:e,nextLoc:s},this.method==="next"&&(this.arg=p),y}},i}(t.exports);try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}})(et);var it=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("k-button",t._b({staticClass:"k-commentions-item-status-flag"},"k-button",t.flag,!1))},nt=[],oe="";function k(t,o,i,c,l,p,w,S){var m=typeof t=="function"?t.options:t;o&&(m.render=o,m.staticRenderFns=i,m._compiled=!0),c&&(m.functional=!0),p&&(m._scopeId="data-v-"+p);var _;if(w?(_=function(v){v=v||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!v&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(v=__VUE_SSR_CONTEXT__),l&&l.call(this,v),v&&v._registeredComponents&&v._registeredComponents.add(w)},m._ssrRegister=_):l&&(_=S?function(){l.call(this,(m.functional?this.parent:this).$root.$options.shadowRoot)}:l),_)if(m.functional){m._injectStyles=_;var $=m.render;m.render=function(P,T){return _.call(T),$(P,T)}}else{var L=m.beforeCreate;m.beforeCreate=L?[].concat(L,_):[_]}return{exports:t,options:m}}const ot={props:{status:{type:String,default:"pending"}},computed:{flag(){const t={icon:"circle-outline",color:"var(--color-notice)",theme:`commentions-${this.status}`,disabled:!0};return this.status==="approved"?t.icon="circle":this.status==="unapproved"?t.icon="cancel":this.status==="update"&&(t.icon="circle-filled"),t}}},z={};var st=k(ot,it,nt,!1,rt,null,null,null);function rt(t){for(let o in z)this[o]=z[o]}var at=function(){return st.exports}(),ct=function(){var t=this,o=t.$createElement,i=t._self._c||o;return t.viewSource?i("div",{staticClass:"k-commentions-text"},[i("pre",{staticClass:"code"},[i("code",{staticClass:"language-commention"},[t._v(t._s(t.source))])])]):i("div",{ref:"preview",staticClass:"k-commentions-text",domProps:{innerHTML:t._s(t.text)}})},lt=[],se="";const ut={props:{text:{type:String,default:""},source:{type:String,default:""},viewSource:{type:Boolean,default:!1}},data(){return[]},mounted(){this.postfixPreviewHTML()},updated(){this.postfixPreviewHTML()},methods:{postfixPreviewHTML(t){if(!this.$refs.preview)return;this.$refs.preview.querySelectorAll("a").forEach(i=>{i.getAttribute("target")!=="_blank"&&i.setAttribute("target","_blank")})}}},V={};var mt=k(ut,ct,lt,!1,ht,null,null,null);function ht(t){for(let o in V)this[o]=V[o]}var dt=function(){return mt.exports}(),ft=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("li",{staticClass:"k-commentions-item"},[i("div",{staticClass:"k-commentions-item-content"},[i("div",{staticClass:"k-commentions-item-icon"},[i("k-icon",{attrs:{type:t.icon}})],1),i("div",{staticClass:"k-commentions-item-text"},[i("div",{staticClass:"k-commentions-item-header"},[t.item.status==="update"?i("p",{staticClass:"k-commentions-item-update"},[t._v(" Update: ")]):t._e(),i("p",{staticClass:"k-commentions-item-source",domProps:{innerHTML:t._s(t.item.source_formatted)}}),i("time",{staticClass:"k-commentions-item-date",attrs:{datetime:t.item.timestamp}},[t._v(" "+t._s(t.dateFormatted)+" ")]),t.item.email?i("p",{staticClass:"k-commentions-item-email"},[i("a",{attrs:{href:"mailto:"+t.item.email}},[t._v(t._s(t.item.email))])]):t._e(),t.show!=="page"?i("p",{staticClass:"k-commentions-item-target"},[t._v(" \u2192 "+t._s(t.item.pageid)+" ")]):t._e()]),t.item.text?i("k-commentions-text",{attrs:{text:t.item.text_sanitized,source:t.item.text,"view-source":t.viewSource}}):t._e(),t.item.custom?i("details",{staticClass:"k-commentions-item-custom",domProps:{innerHTML:t._s(t.customFields)}}):t._e()],1)]),i("nav",{staticClass:"k-commentions-item-options"},[i("k-commentions-status",{attrs:{status:t.item.status}}),i("k-button",{staticClass:"k-commentions-item-toggle",attrs:{tooltip:t.$t("options"),icon:"dots",alt:t.Options},on:{click:function(c){return c.stopPropagation(),t.$refs.options.toggle()}}}),i("k-dropdown-content",{ref:"options",attrs:{options:t.options,align:"right"},on:{action:function(c){return t.$emit("action",c,t.item.uid,t.item.pageid)}}})],1)])},pt=[],re="";const vt={components:{"k-commentions-status":at,"k-commentions-text":dt},props:{status:String,show:String,viewSource:{type:Boolean,default:!1},item(){return{type:Object,default:{}}}},data(){return{}},computed:{hasText(){return["reply","comment"].includes(this.item.type)&&item.text_sanitized},icon(){switch(this.item.type){case"webmention":case"mention":case"trackback":case"pingback":return"commentions-webmention";case"like":return"heart";case"bookmark":return"bookmark";case"reply":return"parent";case"comment":return"chat";default:return"circle-outline"}},customFields(){let t="<summary>More ("+Object.keys(this.item.custom).length+")</summary><div><table>";for(let o in this.item.custom)t+="<tr><td>"+o+"</td><td>"+this.item.custom[o]+"</td></tr>";return t+="</table></div></summary>",t},dateFormatted(){return this.$library.dayjs(this.item.timestamp).format(this.$t("commentions.section.datetime.format"))},options(){return[{icon:"check",text:this.$t("commentions.section.option.approve"),disabled:this.item.status==="approved",click:{status:"approved"}},{icon:"cancel",text:this.$t("commentions.section.option.unapprove"),disabled:this.item.status==="unapproved",click:{status:"unapproved"}},"-",{icon:"url",text:this.$t("commentions.section.option.openwebsite"),link:this.item.source?this.item.source:this.item.website,target:"_blank",disabled:!this.item.source&&!this.item.website},{icon:"email",text:this.$t("commentions.section.option.sendemail"),link:`mailto:${this.item.email}`,target:"_blank",disabled:!this.item.email},"-",{icon:"edit",text:this.$t("commentions.section.option.edit"),click:"edit"},{icon:"trash",text:this.$t("commentions.section.option.delete"),click:"delete"}]}}},D={};var _t=k(vt,ft,pt,!1,gt,null,null,null);function gt(t){for(let o in D)this[o]=D[o]}var yt=function(){return _t.exports}(),kt=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("ul",{staticClass:"k-commentions-list"},[t._t("default")],2)},$t=[],ae="";const bt={},U={};var wt=k(bt,kt,$t,!1,St,null,null,null);function St(t){for(let o in U)this[o]=U[o]}var xt=function(){return wt.exports}(),Ct=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"k-grid k-commentions-pagesettings"},[t._t("default")],2)},Lt=[],ce="";const Et={},B={};var Pt=k(Et,Ct,Lt,!1,Tt,null,null,null);function Tt(t){for(let o in B)this[o]=B[o]}var Rt=function(){return Pt.exports}(),Ot=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"k-column",attrs:{"data-width":"1/3"}},[i("div",{staticClass:"k-toggle-field k-field"},[i("div",{staticClass:"k-input",attrs:{"data-theme":"field","data-type":"toggle"}},[i("span",{staticClass:"k-input-element"},[i("label",{staticClass:"k-toggle-input",attrs:{"data-disabled":t.setting.disabled}},[i("input",{ref:"input",staticClass:"k-toggle-input-native",attrs:{id:t.setting.id,disabled:t.setting.disabled,type:"checkbox"},domProps:{checked:t.setting.value},on:{change:function(c){return t.change(c.target.checked)}}}),i("span",{staticClass:"k-toggle-input-label",domProps:{innerHTML:t._s(t.label)}})])])])])])},Mt=[],le="";const jt={props:{setting:Object},computed:{label(){return Array.isArray(this.setting.text)?this.setting.value?this.setting.text[0]:this.setting.text[1]:this.setting.text}},methods:{change(t){this.setting.value=t,this.$emit("change",this.setting.id,t)}}},W={};var Gt=k(jt,Ot,Mt,!1,Nt,null,null,null);function Nt(t){for(let o in W)this[o]=W[o]}var Ft=function(){return Gt.exports}(),At=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("k-dialog",{ref:"dialog",attrs:{button:t.$t("delete"),theme:"negative",icon:"trash"},on:{submit:t.submit}},[i("k-text",{domProps:{innerHTML:t._s(t.message)}})],1)},It=[];const Ht={data(){return{item:null}},computed:{message:function(){if(!this.item)return"";let t="";switch(this.item.type){case"webmention":t=this.$t("commentions.section.delete.webmention.confirm");break;case"mention":t=this.$t("commentions.section.delete.mention.confirm");break;case"trackback":t=this.$t("commentions.section.delete.trackback.confirm");break;case"pingback":t=this.$t("commentions.section.delete.pingback.confirm");break;case"like":t=this.$t("commentions.section.delete.like.confirm");break;case"bookmark":t=this.$t("commentions.section.delete.bookmark.confirm");break;case"reply":t=this.$t("commentions.section.delete.reply.confirm");break;case"comment":t=this.$t("commentions.section.delete.comment.confirm");break;default:t=this.$t("commentions.section.delete.unknown.confirm")}return t}},methods:{open(t){this.item=t,this.$refs.dialog.open(),this.$emit("open",this.item)},close(){this.$refs.dialog.close(),this.$emit("close",this.item),this.item=null},submit(){this.$refs.dialog.close(),this.$emit("submit",this.item),this.item=null}}},Y={};var qt=k(Ht,At,It,!1,zt,null,null,null);function zt(t){for(let o in Y)this[o]=Y[o]}var Vt=function(){return qt.exports}(),Dt=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("k-dialog",{ref:"dialog",staticClass:"k-commentions-editdialog",attrs:{button:t.$t("save"),notification:t.notification,size:"large",theme:"positive"},on:{submit:function(c){return t.$refs.form.submit()}}},[i("k-form",{ref:"form",attrs:{fields:t.fields},on:{input:t.input,submit:t.submit},model:{value:t.commention,callback:function(c){t.commention=c},expression:"commention"}})],1)},Ut=[],ue="";const Bt={data(){return{notification:null,commention:{uid:null,name:null,timestamp:null,email:null,avatar:null,website:null,type:null,text:null,source:null,custom:null}}},computed:{fields(){return{name:{label:this.$t("commentions.section.edit.name"),type:"text",icon:"user",preselect:!0},website:{label:this.$t("commentions.section.edit.website"),type:"url"},email:{label:this.$t("commentions.section.edit.email"),type:"email"},avatar:{label:this.$t("commentions.section.edit.avatar"),type:"url"},timestamp:{label:this.$t("commentions.section.edit.timestamp"),type:"date",required:!0,time:{step:{size:1,unit:"minute"}}},type:{label:this.$t("commentions.section.edit.type"),type:"select",required:!0,icon:"template",empty:!1,options:[{value:"comment",text:"Comment"},{value:"webmention",text:"Webmention"},{value:"reply",text:"Reply"},{value:"like",text:"Like"},{value:"repost",text:"Repost"},{value:"bookmark",text:"Bookmark"},{value:"read",text:"Read"},{value:"rsvpyes",text:"RSVP yes"},{value:"rsvpno",text:"RSVP no"},{value:"rsvpmaybe",text:"RSVP maybe"}]},text:{label:this.$t("commentions.section.edit.text"),type:"textarea",buttons:!1,size:"small"},source:{label:this.$t("commentions.section.edit.source"),type:"url"}}}},methods:{open(t,o,i){this.pageid=o,this.commention={uid:t.uid,name:t.name,timestamp:t.timestamp,email:t.email,avatar:t.avatar,website:t.website,type:t.type,text:t.text,source:t.source};for(let c=0;c<i.length;c++){let l=i[c].id;t.custom?this.commention[l]=t.custom[l]:this.commention[l]=null,this.fields[l]={label:l,type:i[c].type}}this.$refs.dialog.open(),this.input(t),console.log(this.notification)},input(t){t.type==="comment"?(this.fields.source.disabled=!0,this.fields.source.required=!1):(this.fields.source.disabled=!1,this.fields.source.required=!0)},submit(){if(this.fields.source.required&&!this.commention.source){this.$refs.dialog.error("Source URL is required for webmentions");return}const t={};for(let o in this.commention)o!="uid"&&(t[o]=this.commention[o]);this.$refs.dialog.close(),this.$emit("submit",[this.pageid,this.commention.uid,t]),this.commention=null}}},X={};var Wt=k(Bt,Dt,Ut,!1,Yt,null,null,null);function Yt(t){for(let o in X)this[o]=X[o]}var Xt=function(){return Wt.exports}(),Jt=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("section",{staticClass:"k-commentions-section k-section"},[i("header",{staticClass:"k-section-header"},[i("k-headline",[t._v(t._s(t.headline))]),i("k-button-group",[i("k-button",{attrs:{icon:"code",theme:t.viewSource?"active":""},on:{click:function(c){return t.toggleViewSource()}}},[t._v(t._s(t.$t("commentions.section.button.viewsource")))]),i("k-button",{attrs:{icon:"refresh"},on:{click:t.refresh}},[t._v(t._s(t.$t("commentions.section.button.refresh")))])],1)],1),t._l(t.commentionsSystemErrors,function(c){return i("k-box",{key:c.id,attrs:{theme:c.theme}},[i("k-text",{attrs:{size:"small"},domProps:{innerHTML:t._s(c.message)}})],1)}),t.commentions.length>0?i("k-commentions-list",t._l(t.paginated,function(c){return i("k-commentions-item",{key:c.uid,attrs:{item:c,show:t.show,"view-source":t.viewSource},on:{action:t.action}})}),1):i("k-empty",{attrs:{layout:"list",icon:"chat"},on:{click:t.refresh}},[t._v(" "+t._s(t.empty)+" ")]),i("k-pagination",t._b({on:{paginate:function(c){return t.paginate(c)}}},"k-pagination",t.paginationOptions,!1)),i("k-commentions-pagesettings",t._l(t.settings,function(c){return i("k-commentions-pagesettingstoggle",{key:c.id,attrs:{setting:c},on:{change:t.changePageSetting}})}),1),i("k-commentions-edit-dialog",{ref:"edit",on:{submit:function(c){return t.updateCommention(c)}}}),i("k-commentions-remove-dialog",{ref:"remove",on:{submit:function(c){return t.deleteCommention(c)}}})],2)},Kt=[],me="";const Qt={extends:"k-info-section",components:{"k-commentions-list":xt,"k-commentions-item":yt,"k-commentions-pagesettings":Rt,"k-commentions-pagesettingstoggle":Ft,"k-commentions-remove-dialog":Vt,"k-commentions-edit-dialog":Xt},props:{name:String,parent:String},data(){return{headline:null,commentions:[],empty:null,show:null,errors:[],viewSource:!1,settings:[],pageNumber:0,limit:null,customfields:[]}},created(){this.load().then(t=>{this.headline=t.headline,this.commentions=t.commentions,this.empty=t.empty,this.commentionsSystemErrors=t.commentionsSystemErrors,this.settings=t.pageSettings,this.pageid=t.pageId,this.show=t.show,this.limit=t.limit,this.customfields=t.customFields})},computed:{paginationOptions(){return[{total:Object.keys(this.commentions).length,details:!0,limit:this.limit}]},paginated(){const t=this.pageNumber*this.limit,o=t+this.limit;return this.commentions.slice(t,o)}},methods:{load(){return this.$api.get(this.parent+"/sections/"+this.name)},paginate(t){this.pageNumber=t.page-1;const o=this.pageNumber*this.limit,i=o+this.limit;this.paginated=this.commentions.slice(o,i)},toggleViewSource(){this.viewSource=!this.viewSource},action(t,o,i,c=this.customfields){if(t==="delete"){this.$refs.remove.open(this.commentions.find(l=>l.uid===o));return}if(t==="edit"){this.$refs.edit.open(this.commentions.find(l=>l.uid===o),i,c);return}this.updateCommention([i,o,t])},async updateCommention(t){const o=t[0].replace(/\//g,"+"),i=t[1],c=`commentions/${o}/${i}`;await this.$api.patch(c,t[2]),await this.load().then(l=>this.commentions=l.commentions),this.$store.dispatch("notification/success",":)")},async deleteCommention(t){const i=`commentions/${t.pageid.replace(/\//g,"+")}/${t.uid}`;await this.$api.delete(i),await this.load().then(c=>this.commentions=c.commentions),this.$store.dispatch("notification/success",":)")},async changePageSetting(t,o){const i="commentions/pagesettings/"+this.pageid.replace(/\//g,"+");await this.$api.patch(i,{key:t,value:o})},refresh(){this.load().then(t=>this.commentions=t.commentions)}}},J={};var Zt=k(Qt,Jt,Kt,!1,te,null,null,null);function te(t){for(let o in J)this[o]=J[o]}var ee=function(){return Zt.exports}();panel.plugin("sgkirby/commentions",{sections:{commentions:ee},icons:{"commentions-webmention":'<polygon fill-rule="nonzero" points="9.23775281 14.8085393 7.34377528 9.01793258 7.31235955 9.01793258 5.45002247 14.8085393 2.96193258 14.8085393 0.00413483146 3.62759551 2.4611236 3.62759551 4.2294382 11.2382921 4.26067416 11.2382921 6.20139326 5.44750562 8.50202247 5.44750562 10.411191 11.3318652 10.4425618 11.3318652 11.8070562 5.45137079 10.0297079 5.44750562 13.7139775 2.02314607 16 5.45191011 14.189618 5.45078652 11.6785169 14.8085393"></polygon>'}})})();})();
